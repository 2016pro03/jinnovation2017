<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta http-equiv="Content-Security-Policy" content="default-src * data:; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
  <script src="components/loader.js"></script>
  <script src="lib/angular/angular.min.js"></script>
  <script src="lib/onsenui/js/onsenui.min.js"></script>
  <script src="lib/onsenui/js/angular-onsenui.min.js"></script>

  <link rel="stylesheet" href="components/loader.css">
  <link rel="stylesheet" href="lib/onsenui/css/onsenui.css">
  <link rel="stylesheet" href="lib/onsenui/css/onsen-css-components.css">
  <link rel="stylesheet" href="css/style.css">

  <script>
    ons.bootstrap()
      .controller('HelloController', function() {
          var ncmb = new NCMB("c43b5d5fe03f0563c9f2d53335f682b9c139f8267acd2aaf83a09465defefb0a", "55138871300b1f583d20bbf82f82b91b71d94987fb0f093fd868c401660dc4f5");
            var TestClass = ncmb.DataStore("TestClass");

            // 保存先クラスのインスタンスを生成         
            var testClass = new TestClass();
            var hoge ="";

            // 値を設定と保存
            testClass.set("message", "Hello, NCMB!")
                .save()
                .then(function(object){
                    // 保存に成功した場合の処理
                    TestClass.fetchAll().then(function(results){
                        for (var i = 0; i < results.length; i++) {
                        var object = results[i];
                        hoge += object.message;
                        alert(hoge);
                        console.log(object.message);
                    }

                })
                .catch(function(err){
                    // 保存に失敗した場合の処理
                    alert("error");
                });  
            
          })
         .catch(function(err){
            console.log(err);
          });
          
          
          this.world = "World";
      });
    ons.ready(function() {
      console.log("Onsen UI is ready!");
    });
  </script>
</head>
<body>
  <ons-page ng-controller="HelloController as hello">
    <ons-toolbar>
      <div class="center">Introduction</div>
    </ons-toolbar>
    {{hello.world}}
  </ons-page>
</body>
</html>
